---
layout: "../../layouts/BlogPost.astro"
title: "環境構築について"
pubDate: "2021/6/5"
heroImage: "https://www.google.com/logos/doodles/2016/first-day-of-school-2016-5187470943584256-hp2x.jpg"
description: "実習を伴う授業について思うことを述べる"
---

**このページには政治的と取られうる主張が含まれるかもしれません。**

先日あるグループワークでライブラリをインストールすることになった。分析課題に取
り組むために、私が必要と判断したからだ。そこでグループのメンバーと話し合って、
「基本的にはGoogle Colabで実行してもらうけど、（編集の衝突が恐ろしいので）普段
は手元のJupyter Notebookでコードを書くようにしよう」と方針を固めた。コーディン
グを担当する人が自分の手元でそのライブラリをインストールしてもらうということに
なったのである。翌週になって、私もライブラリをインストールして、ちょっとずつ
コードを書き上げていたので、それを共有しようと思ったところ、どうやらライブラリ
のインストールが上手く行っていないようだった。その日の私はライブラリの導入のサ
ポートで時間が終わってしまった。

## コーディングはたしかに重要
この大学ではプログラミングの授業が1年次から始まる。私はすでに旧カリキュラムで授
業を受けている学生なので、今の新入生やこれからの新入生がどうなるかはわからな
い。それでも、早い段階からコーディングという作業、コードを見るという作業に慣れ
る必要はあると思う。いくつかの授業では先生がSULMSで公開したRのコードを読む機会
があったり、実習ではRやPythonのコードを書く必要も出てくる。コーディングについて
は、個人差はあるがみんなそれなりにできるようになる。

これはこれで重要だと思う。コードを書くというか、プログラミングをする上で、for
ループが書けない、if文が書けない、となると、もはや何を勉強しているのかわからな
くなる。私もプログラミングの勉強を始めたとき、まずはif文というもの、forループと
いうものを父親から教わった。このような制御構文の組み合わせでプログラムが作られ
るんだなあと薄っぺらい感想を抱いたことを覚えている。

## 環境構築が鬼門
だが買ったばかりのパソコンでいきなりプログラミングを始めることは、*基本的に*で
きない。もちろん現在は、.jsファイルをChromeで開けばプログラミングができたり、
Google Colabを立ち上げればはじめからPythonが使えたり、はじめから存在するアプリ
ケーションだけでプログラミングを始めることはできる。ただこれまでは、そして現在
でも大抵のプログラミングでは、新しいツールを導入して、適切にパスを追加して、そ
れらのツールにアクセスできるようにするという、**環境構築**なる作業が必要であ
る。

この環境構築が昔から初心者を悩ませてきた。私も未だにずっと悩んでいる。プログラ
ミングについて勉強しているのに、今書いているプログラムが本当にどのようにして動
いているのかというのは、本当に知る機会が少ない。これについては、私が無知である
とか、私たちの勉強が足りていないという要因以外にも、いくつか要素が絡んでいると
思う。

## なぜ私たちは無知なのか
大学教育のシーンを、ただの学生である私がなんとなく想像で考えてみる。大学で与え
られる15コマは、本当に限られている。非常に短い。おそらくどの講義でも、「とても
15コマで教えられる量ではないので、〇〇はやらない可能性があります」って初回で
言っているんじゃないかと思われる。確かに、先生が数十年かけて勉強してきたような
内容を90分×115コマですべて教えるのは不可能だろう。プログラミングに関して言え
ば、本当はプログラミングを勉強するためにコンピュータサイエンスなる一分野をガッ
チリと勉強しておくのが理想のはずだ。しかしプログラミングというとやはりif文やfor
ループの書き方やそれらを組み合わせた、いわゆるアルゴリズムっぽい要素をまず教え
る必要がある。そのために必要な環境構築の知識は、講義でカバーできる範囲ではな
い。

そして、環境構築をするには、大学でカバーするのが非常に困難なドメイン知識が背景
につきまとう。正直言ってこれを大学の15回分の講義で効率的に教えられるかという
と、それは2つの意味で不可能だ。一つは、まずコンピュータサイエンスを取り巻く環境
が非常に進展が速いこと。私がかつて教わったJavaというナウでヤングな流行言語は、
もはやJavascriptやPythonの勢力に負けようとしている。私が成人するまでに一つのプ
ログラミング言語が若干オワコンに近づこうとしている。それでもJavaは現在進行系で
需要のある言語だと思われるが、私が就職して数年後にはもうどうなっているのかわか
らない。そのような進展の激しすぎる分野を大学で教えるには、教員側の負担が大きす
ぎるだろう。とてもカバーできるものではない。いやでも奥さんちょっと待てよ。C言語
はもう何十年も一定の需要を持って走ってきているじゃないか。確かにシステムに関わ
る言語の寿命は長いのかもしれない。C言語は長年、そういったシステムプログラムの中
心言語であり続けた。しかし、最近はRustの成長速度が著しい。**MozillaはFirefoxと
いうウェブブラウザのプログラムをRustで書き直すことを検討している、という表明を
している**。\[1\]またマイクロソフトは、**Windowsの根幹となるシステムをRustで書
き直す試みを実験段階だが、進めていることを発表している。** \[2\]そして、もう一
つの意味として、環境構築に実は決まりきったやり方はない。デファクトスタンダード
と呼ばれるものは確かにあるが、データサイエンスに限らず、プログラミングツールは
あくまでツールなので、その中身は正直なんでも良い。個人の好みでWindowsやMacにす
ることもあるだろうし、Linux系を選択するかもしれない。Javaの開発環境を例に取れ
ば、OSはなにか、JDKのバージョンはなにか、エディタは何を使うのか、あるいは
EclipseのようなIDEを使うのか、といった選択肢の組み合わせが無数に存在する。これ
らの個人の好みを折衷させながら適切な講義設計をするのもやはり大変だ。むしろ*そん
なこと*まで教わっていたら、その学生の今後のスキルアップが望めなくなってしまう可
能性がある。実際の講義ではEclipseやAnacondaのように一つの導入が簡単なツールを共
通で使わせることで少しでも講義を円滑にすすめる工夫がされている。導入が簡単とい
うのは、複数の依存ツールを検討しながら個別に順繰りに入れてカスタマイズしていっ
たり、パスなどの設定をすべて行うといった玄人向けの作業がなく、オールインワンで
済ませられるということである。AnacondaやEclipseは企業やプロフェッショナルの場面
でも実用可能なほどに機能が充実しており、一通りのことはできるということだから、
講義においても使われることが多い、ということだと思う。

結局、環境構築には既存のツールを上手く組み合わせて、それらのツールの開発が今ど
の様になっているのかといった、登場人物の整理が必要になる。Pythonの開発者の名前
や趣味、人柄を覚えておく必要はないけれど、Pythonに関わる様々なエコシステムにつ
いて知識がないと、先日のようにライブラリ導入に行き詰まってしまう。この知識を得
るのに大学の講義はあまり期待できない。私たちはあくまで自主的に、これらの環境整
備の方法を調べることが求められているのだ。

## Pythonのエコシステム
Pythonはオープンソースで開発が進められている巨大なプロジェクトである。これが何
を意味するかというと、企業などの支援を受けながら有志で集まって開発が進められる
ものということであり、言ってしまえば様々な面で自己責任である。ソースを非公開に
してサポートを充実させる企業のようなスタイルとは違うということである。私たちが
Anacondaを無料で導入できたりするのは、こういった背景がある。なのでわからないこ
とは自分で調べて、必要に応じてコミュニティや身近な有識者に質問をしなければなら
ない。あるいは公式が出す一次ソースから情報を得なければならない。Pythonのように
成熟したコミュニティではこのn次ソースが充実しているので、とにかくいろいろ調べて
みるしかない。そしてなるべく1次情報から先に参照しよう。1次情報というのは
[python.org](https://python.org)に載っている情報やドキュメントのことである。

大抵のPythonコミュニティやライブラリの公式サイトでは、次のようなコマンドが前提
知識として登場する。しかしながら、これらのツールの背景について、大学で教わる機
会は本当に少ない。あるいは、あっても一瞬しかない。

```
$ pip install numpy
$ pip install pandas
```

DSの教員の方やPythonでプログラミングを長年やってきたプログラマの方にとってはな
んの面白みもないコマンドだが、大学で教員の指示に従ってAnacondaをインストール
し、そのまま講義を受けてきたような学生（e.g. 私）だと、これについて改めて調べる
機会が本当に少ない可能性がある。まずPythonのコミュニティでは
[PyPI](https://pypi.org/)という、パッケージをオンラインで共有するウェブサイトが
ある。そしてpipというコマンドはpipというPythonに付属のツールのことであり、これ
を使うとPyPI上にある便利なパッケージを勝手に持ってきて、手元のPythonライブラリ
群に勝手に追加して必要な設定を済ませてくれる。

しかし、[Anaconda](https://www.anaconda.com/)を導入している場合、Anacondaに同梱
されているcondaというツールも使うことがある。このcondaというツールもパッケージ
を管理するツールなわけだが、こちらはPyPIではなくAnaconda社のリポジトリからパッ
ケージを拾ってきて、AnacondaのPython環境に追加するツールである。バージョンの差
や依存関係の管理の際に参照する場所がpipとcondaでは全く異なっているのだから、こ
の2つを併用するのは完全に自己責任と言わざるを得ない。まあそもそもPythonコミュニ
ティでパッケージの依存関係なんて、App Storeみたいに統制されているわけじゃないん
だけどな......  このように企業による充実したサポートなどはじめから存在しないの
がPythonコミュニティである。企業による充実したサポートもないのだから、それらを
研究して生活しているわけでもない教員からの充実したサポートが受けられないのは当
然である。先生方が研究なさっている分野についてのサポートなら、私たちは遠慮せず
期待して良いだろう。

## まとめ
確かに大学でコーディングについて教わる機会は多いが、プログラムを始めるために必
要な環境構築について教えてくれる機会は少ない。これについての様々な疑問は大学の
カリキュラムに期待するのではなく、教員や学生を含めた身近な有識者や、各種SNS、コ
ミュニティに期待しよう。あるいは、自分でググって必要な情報を集めたり、執念深く
調べ上げることも大切である。そのさいはとにかく1次情報を優先して参照しよう。
Qiitaやその他の2次以上の情報は筆者なりにまとめられていてわかりやすいと思われる
かもしれないが、それらのみに依存してしまうとなにか大事な情報を見落としてしまう
可能性が高まる。公式ドキュメントが必ずしも充実しているわけではないけれど、私た
ちが普段の学習で必要になる事柄について、そのような事態はまず起こらないだろう。
Qiitaについてあまり良いと思わない人々がいるのも納得である。先日ライブラリの導入
でグループワークの時間が潰れてしまったのも、私としては非常に有意義なものだった
と思っている。相手にとって見れば、わかる人(私が本当に分かる人であるかは疑問)に
ちゃんと相談に乗ってもらえて、そして私は相手に説明をする機会を得ることで自分の
知識について見直す機会が与えられた。このようなやりとりが何より重要で、私も彼に
見習ってどんどんわからないことを質問したり、そのようなコミュニティに参加する姿
勢を身に着けたいなと思う。

参考
\[1\] [Implications of Rewriting a browser in Rust](https://hacks.mozilla.org/2019/02/rewriting-a-browser-component-in-rust/)
\[2\] [Using Rust in Windows](https://msrc-blog.microsoft.com/2019/11/07/using-rust-in-windows/)

